version: '3.8'

services:
  ratmas-bot-dev:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ratmas-bot-dev
    restart: "no"  # Don't restart in dev mode
    
    # Environment variables
    env_file:
      - .env
    environment:
      - NODE_ENV=development
      - TZ=${TZ:-UTC}
    
    # Volume mappings for development
    volumes:
      # Bind mount for live data access
      - ./data:/app/data
      # Optional: bind mount source for debugging
      # - ./src:/app/src:ro
    
    # Development specific settings
    ports:
      - "9229:9229"  # Node.js debugger port
    
    # Override command for development if needed
    # command: ["node", "--inspect=0.0.0.0:9229", "dist/index.js"]
    
    # Health check (less strict for dev)
    healthcheck:
      test: ["CMD", "node", "-e", "process.exit(0)"]
      interval: 60s
      timeout: 10s
      retries: 2
      start_period: 30s
    
    # Development logging
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "2"